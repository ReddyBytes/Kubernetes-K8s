
# Sidecar Containers in Kubernetes

- Sidecar containers are additional containers that run alongside the main application container within the same Kubernetes Pod.  

- They add extra capabilities to the main container, such as handling networking, logging, or initialization tasks, without altering the main application itself. 

- **Enhancement of Features**: They can enhance an applicationâ€™s functionality (e.g., logging, monitoring, proxying) without modifying its code.

- **Isolation**: By running in the same Pod, sidecars can interact with the main container while being isolated in terms of lifecycle and resource limits.



## Types of Sidecar Containers

There are three common types of sidecar containers used in Kubernetes:  
**Init Containers**,  
**Adapter Containers**,   
**Ambassador Containers**.

### 1. **Init Containers**

- **Init containers** are containers that run before the main application container starts. 
- They are designed to perform setup or initialization tasks required to prepare the application environment.  
- Init containers ensure that all dependencies are in place before the primary container is launched.

- The main container will not start until the init containers finish successfully.

#### Use Cases:
- Downloading or preparing configuration files, secrets.
- Checking dependencies like service availability (e.g., ensuring a database is reachable).
- Setting up necessary volumes or permissions.

---
### 2. **Adapter Sidecar Containers**

- **Adapter containers** will run along with main container and modify/transform data generated by the main application.  

- **Data Processing**: They process the output (e.g., logs, metrics, etc.) from the main application.

- **Internal Communication**: They communicate with the main container via shared volumes or inter-process communication (IPC).

#### Use Cases:
- Formatting application logs into a specific structure or forwarding logs to external log collectors.
- Converting application metrics into a format compatible with monitoring systems like Prometheus.
- Performing data transformations or adapting data formats.

**Example containers :** 
`splunk sidecar` for logs
`cymantics sidecar` fro metrics etc.,


---

### 3. **Ambassador Sidecar Containers**

- **Ambassador containers** act as **proxies** between the main application container and the external world.  

- They manage communication, security, and protocols between the application and external services, simplifying how the application interacts with external networks.

- **Proxy for External Communication**: They act as intermediaries for all external traffic going in and out of the Pod.

- **Protocol Handling**: They can handle protocols, routing, and load balancing, making the main application simpler by offloading these tasks to the ambassador.

- **Security**: Often used to handle security protocols like SSL/TLS or API token authentication.

#### Use Cases:
- Performing SSL termination (handling SSL encryption/decryption).
- API gateway handling authentication for incoming requests.
- Proxies for external services such as databases, APIs, or third-party services.

---

### Recognizing Different Types of Sidecar Containers in YAML

- **Init Containers**: 
  - Defined under the `initContainers` field.
  - Always run before the main container starts and are listed separately from the primary containers.
  
- **Adapter Containers**:
  - Listed alongside the main application in the `containers` section.
  - Generally interact with the main container through shared volumes, process logs, or metrics, and modify data internally.

- **Ambassador Containers**:
  - Also listed under the `containers` section.
  - Often define ports for communication and handle external traffic, acting as a proxy.

